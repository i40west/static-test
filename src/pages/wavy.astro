---
// @ts-nocheck
import Layout from '@layouts/Layout.astro';
import Nav from '@components/Nav.astro';

---
<Layout bodyClass="page">
	<Nav />
	<main>

		<section>
			<h1>Wavy Lines</h1>
			<p>Experimentation.</p>
		</section>

		<hr />

		<section>
			<p>This is an svg sine wave.</p>
			<svg width="30" height="20" viewBox="0 0 100 20" preserveAspectRatio="none">
				<path d="M0,10 C 16.6667,0, 33.3333,0, 50,10 C 66.6667,20, 83.3333,20, 100,10" stroke="yellow" fill="transparent" />
			</svg>
			<p>Another version.</p>
			<div id="waveContainer">
				<svg width="30" height="20" viewBox="0 0 100 20" preserveAspectRatio="none" style="pointer-events: none">
					<path d="M0,10 C 16.6667,10, 33.3333,10, 50,10 C 66.6667,10, 83.3333,10, 100,10" 
						stroke="yellow" 
						fill="transparent">
						<animate
							attributeName="d"
							dur="0.3s"
							begin="waveContainer.mouseover"
							fill="freeze"
							from="M0,10 C 16.6667,10, 33.3333,10, 50,10 C 66.6667,10, 83.3333,10, 100,10"
							to="M0,10 C 16.6667,0, 33.3333,0, 50,10 C 66.6667,20, 83.3333,20, 100,10"
						/>
						<animate
							attributeName="d"
							dur="0.3s"
							begin="waveContainer.mouseout"
							fill="freeze"
							from="M0,10 C 16.6667,0, 33.3333,0, 50,10 C 66.6667,20, 83.3333,20, 100,10"
							to="M0,10 C 16.6667,10, 33.3333,10, 50,10 C 66.6667,10, 83.3333,10, 100,10"
						/>
					</path>
				</svg>
			</div>
			<div>
				<svg width="698px" height="74px" viewBox="0 0 698 74" style="stroke-linecap:round;stroke-linejoin:round;">
					<path d="M6.859,9.502C-49.708,55.643 288.138,109.652 347.839,37.846C407.539,-33.961 616.964,12.142 696.96,56.57" style="fill:none;stroke:yellow;stroke-width:1px;"/>
				</svg>
			</div>
		</section>

		<section>
			<p>Here is a wavy line.</p>
			<div class="wave"> </div>
			<p class="wavy">This is underlined with a repeating wave svg.</p>
			<p><a href="#">This is a link with a wavy underline.</a></p>
		</section>

		<section>
			<svg width="35" height="30" viewBox="0 0 35 30">
				<path d="M16.032 0q.934 0 1.547.613t.613 1.544v5.804h.402q2.964 0 5.205-.626 2.241-.625 3.929-2.043t2.96-3.801Q31.163.62 31.737.344a2.7 2.7 0 0 1 1.202-.276q.83 0 1.401.767.571.768.571 2.258 0 4.386-.98 7.877t-2.986 5.953q-2.004 2.462-5.082 3.758t-7.269 1.296h-.402v5.775q0 .92-.613 1.573t-1.573.652q-.644 0-1.163-.28t-1.216-.938L.866 16.868q-.476-.444-.671-.935A2.6 2.6 0 0 1 0 14.989q0-.432.198-.928t.674-.941L13.627 1.136q.63-.595 1.191-.865A2.75 2.75 0 0 1 16.032 0"/>
			</svg>
		</section>

	</main>
</Layout>

<script>
document.addEventListener('DOMContentLoaded', () => {
	document.querySelectorAll('a').forEach((link, index) => {
		const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
		Object.assign(svg.style, {
			width: '100%',
			height: '6px',
			display: 'block',
			marginTop: '-6px',
		});
		// Set a wider viewBox to allow for pattern repetition
		svg.setAttribute('viewBox', '0 0 100 6');
		svg.setAttribute('preserveAspectRatio', 'none');

		const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');

		const pattern = document.createElementNS('http://www.w3.org/2000/svg', 'pattern');
		pattern.setAttribute('id', `wave-pattern-${index}`);
		// Small pattern width for frequent repetition
		pattern.setAttribute('width', '20');
		pattern.setAttribute('height', '6');
		pattern.setAttribute('patternUnits', 'userSpaceOnUse');
		pattern.setAttribute('patternContentUnits', 'userSpaceOnUse');

		const baselinePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
		// Smaller path coordinates for tighter waves
		baselinePath.setAttribute('d', 'M0,3 C 5,3 5,3 10,3 S 15,3 20,3');
		baselinePath.setAttribute('stroke', 'yellow');
		baselinePath.setAttribute('stroke-width', '1');
		baselinePath.setAttribute('fill', 'none');
		baselinePath.style.opacity = '1';

		const wavyPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
		// Smaller path coordinates for tighter waves
		wavyPath.setAttribute('d', 'M0,3 C 5,1 5,1 10,3 S 15,5 20,3');
		wavyPath.setAttribute('stroke', 'yellow');
		wavyPath.setAttribute('stroke-width', '1');
		wavyPath.setAttribute('fill', 'none');
		wavyPath.style.opacity = '0';

		pattern.appendChild(baselinePath);
		pattern.appendChild(wavyPath);
		defs.appendChild(pattern);
		svg.appendChild(defs);

		const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
		rect.setAttribute('width', '100%');
		rect.setAttribute('height', '6');
		rect.setAttribute('fill', `url(#wave-pattern-${index})`);
		svg.appendChild(rect);

		svg.style.pointerEvents = 'none';
		link.appendChild(svg);

		baselinePath.style.transition = 'opacity 0.3s';
		wavyPath.style.transition = 'opacity 0.3s';

		link.addEventListener('mouseenter', () => {
			baselinePath.style.opacity = '0';
			wavyPath.style.opacity = '1';
		});

		link.addEventListener('mouseleave', () => {
			baselinePath.style.opacity = '1';
			wavyPath.style.opacity = '0';
		});
	});
});

</script>

<style>
a {
	text-decoration: none;
	display: inline-block;
}
.wave {
	width: 400px;
	height: 20px;
	background-image: url("data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='4' viewBox='0 0 100 20' preserveAspectRatio='none'%3E%3Cpath d='M0,10 C 16.6667,0, 33.3333,0, 50,10 C 66.6667,20, 83.3333,20, 100,10' stroke='yellow' stroke-width='1' vector-effect='non-scaling-stroke' fill='transparent' /%3E%3C/svg%3E%0A");
	background-repeat: repeat-x;
}
.wavy {
	display: inline-block;
}
:root {
	--wave-amplitude: 10;
}
.wavy::after {
	content: "";
	display: block;
	width: 100%;
	height: 4px;
	background-color: currentColor;
	mask-image: url("data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='4' viewBox='0 0 100 20' preserveAspectRatio='none'%3E%3Cpath d='M0,10 C 16.6667,0, 33.3333,0, 50,10 C 66.6667,20, 83.3333,20, 100,10' stroke='white' stroke-width='1' vector-effect='non-scaling-stroke' fill='transparent' /%3E%3C/svg%3E%0A");
	mask-repeat: repeat-x;
	position: relative;
	top: -4px;
}


</style>

